<div class="invoice-box full-bordered" *ngIf="purchase">
  <div class="no-print text-right mb-3">
    <button class="btn btn-primary me-2" (click)="onEditInvoice()">Edit Invoice</button>
    <button class="btn btn-success" onclick="window.print()">Print Invoice</button>
  </div>


  <div *ngIf="companyprofile" style="display: flex; justify-content: center; margin-bottom: 20px;">
    <div style="display: flex; align-items: center; gap: 20px; width: 100%; max-width: 800px;justify-content: center;">

      <div style="flex-shrink: 0;">
        <img [src]="Base_File_Path + companyprofile.schoolLogo" alt="Logo" style="
          height: 100px;
          width: 100px;
          object-fit: contain;
          border-radius: 50%;
          box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        ">
      </div>


      <div style="text-align: left;">
        <h2 style="margin: 5px 0;font-weight: 700;">{{ companyprofile.name }}</h2>
        <p style="margin: 2px 0;">{{ companyprofile.address }}</p>
        <p style="margin: 2px 0;">{{ companyprofile.contactNo }} | {{ companyprofile.email }}</p>
        <p style="margin: 2px 0;">{{ companyprofile.website }}</p>
        <p style="margin: 2px 0;">{{ companyprofile.gstNumber }}</p>
      </div>
    </div>
  </div>

  <h3 class="center">Purchase Invoice</h3>
  <hr>
  <table class="info-table">
    <tr>
      <td><strong style="font-weight: 700;">Invoice No :</strong> {{ purchase.invoiceNo }}</td>
      <td><strong style="font-weight: 700;">Status :</strong> {{ purchase.status }}</td>
    </tr>
    <tr>
      <td><strong style="font-weight: 700;">Supplier :</strong> {{ purchase.suppliersName }}</td>
      <td><strong style="font-weight: 700;">Bank :</strong> {{ purchase.bankName }}</td>
    </tr>
    <tr>
      <td><strong style="font-weight: 700;">Purchase Date :</strong> {{ purchase.purchaseDate | date:'dd-MM-yyyy' }}
      </td>
      <td><strong style="font-weight: 700;">Supplier GST No :</strong> {{ purchase.supplierGst }}
      </td>
    </tr>
    <tr>
      <td><strong style="font-weight: 700;">Bill To:</strong> {{ purchase.suppliersName }}</td>
      <td><strong style="font-weight: 700;">Generated From:</strong> {{ companyprofile?.name }} - Jaipur, Rajasthan
      </td>
    </tr>
    <tr>
      <td><strong style="font-weight: 700;">Shipping Address:</strong> </td>
      <td><strong style="font-weight: 700;">Generated By:</strong> {{ currentUserName || 'Admin' }}</td>
    </tr>
  </table>


  <table class="bordered">
    <thead>
      <tr class=" heading">
        <th style="font-weight: 700;">#</th>
        <th style="font-weight: 700;">Product</th>
        <th style="font-weight: 700;">Tax</th>
        <th style="font-weight: 700;">Qty</th>
        <th style="font-weight: 700;">Price ({{ currencyname }})</th>
        <th style="font-weight: 700;">Tax Amt ({{ currencyname }})</th>
        <th style="font-weight: 700;">Total ({{ currencyname }})</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of purchase.purchaseDetails; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ item.productName }}</td>
        <td>{{ item.taxNumberName }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.purchasePrice | number:'1.2-2' }}</td>
        <td>{{ item.taxAmount | number:'1.2-2' }}</td>
        <td>{{ item.amount | number:'1.2-2' }}</td>
      </tr>
    </tbody>
  </table>


  <div style="display: flex; justify-content: space-between; margin-top: 20px; gap: 30px; flex-wrap: wrap;">

    <div style="flex: 1; min-width: 250px;border: 1px solid black;">
      <table class="totals-table">
        <tr>
          <td><strong style="font-weight: 700;">IGST:</strong></td>
          <td class="text-right">{{ currencyname }} {{ purchase.igst }}</td>
        </tr>
        <tr>
          <td> <strong style="font-weight: 700;">CGST:</strong></td>
          <td class="text-right">{{ currencyname }} {{ purchase.cgst }}</td>
        </tr>
        <tr>
          <td><strong style="font-weight: 700;">SGST:</strong></td>
          <td class="text-right">{{ currencyname }} {{ purchase.sgst }}</td>
        </tr>
      </table>
    </div>



    <div style="flex: 1;" style="align-content: end;border: 1px solid black;">
      <table class="totals-table  ">
        <tr>
          <td style="font-weight: 700;">Product Discount:</td>
          <td class="text-right">{{ currencyname }} {{ purchase.totalProductDiscount | number:'1.2-2' }}</td>
        </tr>
        <tr>
          <td style="font-weight: 700;">Bill Discount:</td>
          <td class="text-right">{{ currencyname }} {{ purchase.billDiscount | number:'1.2-2' }}</td>
        </tr>
        <tr>
          <td style="font-weight: 700;">Shipping:</td>
          <td class="text-right">{{ currencyname }} {{ purchase.shippingAmount | number:'1.2-2' }}</td>
        </tr>
        <tr>
          <td style="font-weight: 700;">Total Tax:</td>
          <td class="text-right">{{ currencyname }} {{ purchase.totalTaxAmount | number:'1.2-2' }}</td>
        </tr>
        <tr>
          <td style="font-weight: 700;">Net Amount:</td>
          <td class="text-right">{{ currencyname }} {{ purchase.netAmount | number:'1.2-2' }}</td>
        </tr>
        <tr>
          <td style="font-weight: 700;">Paid:</td>
          <td class="text-right">{{ currencyname }} {{ purchase.payAmount | number:'1.2-2' }}</td>
        </tr>
        <tr>
          <td style="font-weight: 700;">Balance Due:</td>
          <td class="text-right">{{ currencyname }} {{ purchase.balanceDue | number:'1.2-2' }}</td>
        </tr>
        <tr class="grand-total">
          <td style="font-weight: 700;">Grand Total:</td>
          <td class="text-right"><strong>{{ currencyname }} {{ purchase.grandtotal | number:'1.2-2' }}</strong></td>
        </tr>
      </table>
    </div>
  </div>
</div>




<!-- <ng-container *ngIf="purchase">
  <div style="max-width: 800px; margin: auto; border: 1px solid #000; padding: 10px; box-sizing: border-box;">
    <div style="text-align: center; font-size: 18px; font-weight: bold; padding: 10px 0;">
      Invoice
    </div>

    <div style="display: flex; flex-wrap: wrap; border: 1px solid #000;">
      <div style="flex: 1 1 60%; padding: 10px; border-right: 1px solid #000; box-sizing: border-box;">
        <img [src]="Base_File_Path + companyprofile.schoolLogo" alt="Logo" style="
          height: 100px;
          width: 100px;
          object-fit: contain;
          border-radius: 50%;
          box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        "> <br>
        <b>Company's Name :</b> {{companyprofile.name}}<br>
        <b> Address :</b> {{companyprofile.Address}}<br>
        <b> GST No :</b> {{companyprofile.gstNumber}}<br>
        <b> State :</b> {{companyprofile.state}} &nbsp;&nbsp; Pin code: 302039<br>
        <b> Contact :</b>{{companyprofile.contactNo}}<br>
        <b> Email :</b> {{companyprofile.email}}
      </div>
      <div style="flex: 1 1 40%; padding: 10px; box-sizing: border-box;">
        <b>Invoice No :</b> {{purchase.invoiceNo}}<br>
        <b>Date :</b> {{ purchase.purchaseDate | date:'dd/MM/yyyy' }}<br><br>
        <b>GST Number :</b>{{purchase.gstNumber}} <br>
        <b>Mode of Payment :</b> Online<br>
        <b>Buyer's Order Id No :</b> {{ order.orderId }}<br>
        <b>Order Date :</b> {{ order.orderDate | date:'dd/MM/yyyy' }}
      </div>
    </div>

    <div style="display: flex; flex-wrap: wrap; border: 1px solid #000; border-top: none;">
      <div style="flex: 1 1 50%; padding: 10px; border-right: 1px solid #000; box-sizing: border-box;">
        <b>Billing Address:</b><br><br>
        {{ order.buyers.name }}<br>
        {{ order.buyers.address }}<br>
        {{ order.buyers.city }}<br>
        {{ order.buyers.state }}<br>
        {{ order.buyers.phoneNo }}<br>
        {{ order.buyers.emailId }}<br>
      </div>
      <div style="flex: 1 1 50%; padding: 10px; box-sizing: border-box;">
        <b>Shipping Address:</b><br><br>
        {{ order.buyers.name }}<br>
        {{ order.buyers.address }}<br>
        {{ order.buyers.city }}<br>
        {{ order.buyers.state }}<br>
        {{ order.buyers.phoneNo }}<br>
        {{ order.buyers.emailId }}<br>
      </div>
    </div>

    <table style="width: 100%; border: 1px solid #000; border-collapse: collapse; margin-top: 10px;">
      <thead>
        <tr style="background: #f2f2f2;">
          <th style="border: 1px solid #000; padding: 6px;">Sr.No</th>
          <th style="border: 1px solid #000; padding: 6px;">Description of Goods</th>
          <th style="border: 1px solid #000; padding: 6px;">HSN/SAC</th>
          <th style="border: 1px solid #000; padding: 6px;">Quantity</th>
          <th style="border: 1px solid #000; padding: 6px;">Rate</th>
          <th style="border: 1px solid #000; padding: 6px;">Per</th>
          <th style="border: 1px solid #000; padding: 6px;">Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of order.orderItems; let i = index">
          <td style="border: 1px solid #000; padding: 6px;">{{ i + 1 }}</td>
          <td style="border: 1px solid #000; padding: 6px;">{{ item.productName || 'Product' }}</td>
          <td style="border: 1px solid #000; padding: 6px;">330300</td>
          <td style="border: 1px solid #000; padding: 6px;">{{ item.quantity }} Nos</td>
          <td style="border: 1px solid #000; padding: 6px;">{{ (order.total / 1.18) | number:'1.2-2' }}</td>
          <td style="border: 1px solid #000; padding: 6px;">Piece</td>
          <td style="border: 1px solid #000; padding: 6px;">
            {{ ((order.total / 1.18) * item.quantity) | number:'1.2-2' }}
          </td>
        </tr>


        <tr>
          <td colspan="6" style="text-align: right; padding: 6px; border: 1px solid #000;"><b>Sub Total</b></td>
          <td style="border: 1px solid #000; padding: 6px;">
            ₹ {{ (order.total / 1.18) | number:'1.2-2' }}
          </td>
        </tr>


        <ng-container *ngIf="order.buyers.state === 'Rajasthan'; else igstBlock">
          <tr>
            <td colspan="6" style="text-align: right; padding: 6px; border: 1px solid #000;">SGST 9%</td>
            <td style="border: 1px solid #000; padding: 6px;">
              ₹ {{ ((order.total / 1.18) * 0.09) | number:'1.2-2' }}
            </td>
          </tr>
          <tr>
            <td colspan="6" style="text-align: right; padding: 6px; border: 1px solid #000;">CGST 9%</td>
            <td style="border: 1px solid #000; padding: 6px;">
              ₹ {{ ((order.total / 1.18) * 0.09) | number:'1.2-2' }}
            </td>
          </tr>
        </ng-container>

        <ng-template #igstBlock>
          <tr>
            <td colspan="6" style="text-align: right; padding: 6px; border: 1px solid #000;">IGST 18%</td>
            <td style="border: 1px solid #000; padding: 6px;">
              ₹ {{ ((order.total / 1.18) * 0.18) | number:'1.2-2' }}
            </td>
          </tr>
        </ng-template>


        <tr>
          <td colspan="6" style="text-align: right; padding: 6px; border: 1px solid #000; font-weight: bold;">
            Grand Total
          </td>
          <td style="border: 1px solid #000; padding: 6px; font-weight: bold;">
            ₹ {{ order.total | number:'1.2-2' }}
          </td>
        </tr>
      </tbody>

    </table>


    <p style="font-size: 12px; color: #666;">Applicable only if place of supply is other than Rajasthan</p>

    <p>We declare that this invoice shows the actual price of the goods described<br> and that all particulars are true
      and correct.</p>

    <div style="margin-top: 30px; text-align: right;">
      ____________________<br>
      Authorised Signatory
    </div>
  </div>


  <div class="no-print text-right mb-3">

    <button class="btn btn-success" onclick="window.print()">Print Invoice</button>
  </div>


</ng-container> -->
