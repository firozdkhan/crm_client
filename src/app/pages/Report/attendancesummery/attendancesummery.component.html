<div class="row ">
  <div class="col-xl-12">
    <div id="panel-1" class="panel">
      <app-entry-panel-header [title]="'Attendance Report'"> </app-entry-panel-header>
      <div class="panel-container  show">
        <div class="panel-content">

          <form [formGroup]="attendanceForm" (ngSubmit)="onSubmit()">

            <div class="row">
              <div class="col-xl-2">
                <app-category-dropdown [catId]="3" [addAll]="true" formControlName="departmentId"
                  [label]="'Department'"></app-category-dropdown>
              </div>

              <div class="col-xl-2">
                <app-category-dropdown [catId]="20" [addAll]="true" formControlName="designationId"
                  [label]="'Designation'"></app-category-dropdown>
              </div>

              <div class="col-xl-2">
                <label for="shiftId">Shift</label>
                <select formControlName="shiftId" class="form-control">
                  <option value="">Select Shift</option>
                  <option *ngFor="let shift of shiftdata" [value]="shift.id">
                    {{ shift.name }}
                  </option>
                </select>

              </div>



              <div class="col-2">

                <app-date-picker [value]="today" [(ngModel)]="startDate" [label]="'From-Date'"
                  formControlName="fromDate"></app-date-picker>
              </div>



              <div class="col-2">
                <app-date-picker [value]="today" [(ngModel)]="endDate" [label]="'To-Date'"
                  formControlName="toDate"></app-date-picker>

              </div>
              <div class="col-2">

                <app-text-input [label]="'Working Days'" formControlName="workingDays"></app-text-input>
              </div>
              <div class="col-xl-3" style="margin-top: 1.5rem;">
                <app-footer-buttons [buttonText]="buttonText" (resetForm)="cancel()" [isValid]="!attendanceForm.valid">
                </app-footer-buttons>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

</div>






<div class="container-fluid">
  <div class="mb-4">
    <h2 class="header-title">Employee Attendance Details</h2>
  </div>

  <div class="table-responsive table-card">
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>#</th>
          <th>Staff Code</th>
          <th>Employee Name</th>
          <th>Department</th>
          <th>Designation</th>
          <th>Date</th>
          <th>In Time</th>
          <th>Out Time</th>
          <th>Working Hours</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let emp of attendanceslist; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ emp.staffcode }}</td>
          <td>{{ emp.staffname }}</td>
          <td>{{ emp.department }}</td>
          <td>{{ emp.designation }}</td>
          <td>{{ emp.date | date: 'dd-MM-yyyy' }}</td>
          <td>{{ emp.inTime }}</td>
          <td>{{ emp.outTime }}</td>
          <td>{{ emp.workingHours }}</td>
          <td>{{ emp.attendancestatus }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div *ngFor="let staff of uniqueStaffNames">
  <strong>Total Working Hours for {{ staff }}:</strong>
  {{ getTotalWorkingTimeFormatted(staff) }}
</div>
